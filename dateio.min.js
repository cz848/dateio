const t=(t,e)=>("00"+t).slice(-e||-2),e=t=>[null,void 0].indexOf(t)<0,r=/MS|ms|[YMDWHISAUymdwhisau]/g,s=/^(?:MS|ms|[YMDWHISAUymdwhisau])$/,i=/^(?:ms|[Uymdwhisu])$/,n=/^([+-]?(?:\d*\.)?\d+)(ms|[ymdwhis])?$/,h={ms:1,s:1e3,i:6e4,h:36e5,d:864e5,w:6048e5,m:1,y:12};let a={weekdays:["日","一","二","三","四","五","六"],interval:["凌晨","上午","下午","晚上"]};const u=t=>(a={...a,...t},a),o=(t,r,s)=>{const i=s.filter(e);return i.length?((t,e,r)=>(r.some(isNaN)||("FullYear"===e&&r.length>1?r[1]-=1:"Month"===e&&(r[0]-=1),"Day"===e?t.add(r[0]-t.w(),"d"):t.$date["set"+e](...r)),t))(t,r,i):((t,e)=>t.$date["get"+e]()+Number("Month"===e))(t,r)};class d{constructor(t){this.I18N=u(),this.init(t)}init(t){return this.$date=(t=>{let r=t;return e(t)?"string"!=typeof t||/T.+(?:Z$)?/i.test(t)?Array.isArray(t)&&(r=new Date(t.splice(0,3)).setHours(...t.concat(0))):r=t.replace(/-/g,"/"):r=Date.now(),new Date(r)})(t),this}y(t,e,r){return o(this,"FullYear",[t,e,r])}Y(){return t(this.y(),4)}m(t,e){return o(this,"Month",[t,e])}M(){return t(this.m())}d(t){return o(this,"Date",[t])}D(){return t(this.d())}w(t){return o(this,"Day",[t])}W(){return this.I18N.weekdays[this.w()]}h(t,e,r,s){return o(this,"Hours",[t,e,r,s])}H(){return t(this.h())}i(t,e,r){return o(this,"Minutes",[t,e,r])}I(){return t(this.i())}s(t,e){return o(this,"Seconds",[t,e])}S(){return t(this.s())}ms(t){return o(this,"Milliseconds",[t])}MS(){return t(this.ms(),3)}a(){return this.I18N.interval[Math.floor(this.h()/24*this.I18N.interval.length)]}A(){return this.a().toUpperCase()}u(t){return e(t)?this.init(t):+this}U(t){return e(t)?this.init(1e3*t):Math.round(this/1e3)}get(t=""){return s.test(t)?this[t]():void 0}set(t="",e,r,s,n){return i.test(t)?this[t](e,r,s,n):this}toDate(){return this.$date}toString(){return this.$date.toString()}valueOf(){return this.$date.valueOf()}clone(){return new d(+this)}format(t){return String(t||"Y-M-D H:I:S").replace(r,t=>this[t]())}startOf(t,e){let r="y m d h i s";if(r=r.slice(0,r.indexOf("w"===t?"d":t)+1),!r)return this;"w"===t&&this.w(e?6:0);const s=this.format(r).split(" "),i=[0,12,31,23,59,59,999];"m"===t&&(i[2]=this.daysInMonth());const n=e?i:[1,1];return this.init(s.concat(n.slice(s.length)))}endOf(t){return this.startOf(t,!0)}diff(t,e,r=!1){const s=new d(t),i=((t,e)=>{const r=12*(e.y()-t.y())+(e.m()-t.m()),s=t.clone().add(r,"m"),i=t.clone().add(r+(e>s?1:-1),"m");return-(r+(e-s)/Math.abs(i-s))||0})(this,s);let n=this-s;return/^[ym]$/.test(e)?n=i/h[e]:n/=h[e]||1,r?n:Math.trunc(n)}add(t,e){const r=String(t).match(n);if(!r)return this;const[,s,i=e||"ms"]=r;return/^[ym]$/.test(i)?this.m(this.m()+Number((s*h[i]).toFixed(0))):this.init(s*(h[i]||0)+this.valueOf())}subtract(t,e){return this.add("-"+t,e)}isLeapYear(){const t=this.y();return t%100?t%4==0:t%400==0}daysInMonth(){return[31,28+Number(this.isLeapYear()),31,30,31,30,31,31,30,31,30,31][this.m()-1]}isSame(t,e){return+this.clone().startOf(e)==+new d(t).startOf(e)}}const l=t=>new d(t);l.prototype=d.prototype,l.locale=u;export default l;
