const t=(t,e)=>("00"+t).slice(-e||-2),e=t=>[null,void 0].indexOf(t)<0,s=/MS|ms|[YMDWHISAUymdwhisau]/g,r=/^(?:MS|ms|[YMDWHISAUymdwhisau])$/,i=/^(?:ms|[Uymdwhisu])$/,n=/^([+-]?(?:\d*\.)?\d+)(ms|[ymdwhis])?$/,h={ms:1,s:1e3,i:6e4,h:36e5,d:864e5,w:6048e5,m:1,y:12};let u={weekdays:["日","一","二","三","四","五","六"],meridiem:["凌晨","上午","下午","晚上"]};const a=t=>(u={...u,...t},u),o=(t,e)=>t.$date["get"+e]()+Number("Month"===e),d=(t,s,r)=>{const i=r.filter(e);return i.length?((t,e,s)=>(s.some(isNaN)||("FullYear"===e&&s.length>1?s[1]-=1:"Month"===e&&(s[0]-=1),"Day"===e?t.add(s[0]-o(t,e),"d"):t.$date["set"+e](...s)),t))(t,s,i):o(t,s)};class m{constructor(t){this.I18N=a(),this.init(t)}init(t){return this.$date=(t=>{let s=t;return e(t)?"string"!=typeof t||/T.+(?:Z$)?/i.test(t)?Array.isArray(t)&&(s=new Date(t.splice(0,3)).setHours(...t.concat(0))):s=t.replace(/-/g,"/"):s=Date.now(),new Date(s)})(t),this}y(t,e,s){return d(this,"FullYear",[t,e,s])}Y(){return t(this.y(),4)}m(t,e){return d(this,"Month",[t,e])}M(){return t(this.m())}d(t){return d(this,"Date",[t])}D(){return t(this.d())}w(t){return d(this,"Day",[t])}W(){return this.I18N.weekdays[this.w()]}h(t,e,s,r){return d(this,"Hours",[t,e,s,r])}H(){return t(this.h())}i(t,e,s){return d(this,"Minutes",[t,e,s])}I(){return t(this.i())}s(t,e){return d(this,"Seconds",[t,e])}S(){return t(this.s())}ms(t){return d(this,"Milliseconds",[t])}MS(){return t(this.ms(),3)}a(){const{meridiem:t}=this.I18N;return"function"==typeof t?t(this.h(),this.i()):t[Math.floor(this.h()/24*t.length)]}A(){return this.a().toUpperCase()}u(t){return e(t)?this.init(t):+this}U(t){return e(t)?this.init(1e3*t):Math.round(this/1e3)}get(t=""){return r.test(t)?this[t]():void 0}set(t="",e,s,r,n){return i.test(t)?this[t](e,s,r,n):this}toDate(){return this.$date}toString(){return this.$date.toString()}valueOf(){return this.$date.valueOf()}clone(){return new m(+this)}format(t){return String(t||"Y-M-D H:I:S").replace(s,t=>this[t]())}startOf(t,e){let s="y m d h i s";if(s=s.slice(0,s.indexOf("w"===t?"d":t)+1),!s)return this;"w"===t&&this.w(e?6:0);const r=this.format(s).split(" "),i=[0,12,31,23,59,59,999];"m"===t&&(i[2]=this.daysInMonth());const n=e?i:[1,1];return this.init(r.concat(n.slice(r.length)))}endOf(t){return this.startOf(t,!0)}diff(t,e,s=!1){const r=new m(t);let i=this-r;return/^[ym]$/.test(e)?i=((t,e)=>{const s=12*(e.y()-t.y())+(e.m()-t.m()),r=t.clone().add(s,"m"),i=t.clone().add(s+(e>r?1:-1),"m");return-(s+(e-r)/Math.abs(i-r))||0})(this,r)/h[e]:i/=h[e]||1,s?i:Math.trunc(i)}add(t,e){const s=String(t).match(n);if(!s)return this;const[,r,i=e||"ms"]=s;return/^[ym]$/.test(i)?this.m(this.m()+Number((r*h[i]).toFixed(0))):this.init(r*(h[i]||0)+this.valueOf())}subtract(t,e){return this.add("-"+t,e)}isLeapYear(){const t=this.y();return t%100?t%4==0:t%400==0}daysInMonth(){return this.m(this.m()+1,0).d()}isSame(t,e){return+this.clone().startOf(e)==+new m(t).startOf(e)}}const c=t=>new m(t);c.prototype=m.prototype,c.locale=a;export default c;
